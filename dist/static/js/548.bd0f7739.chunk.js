"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[548],{3548:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var r=n(5861),a=n(9439),i=n(7757),s=n.n(i);function c(){return(c=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-categories").catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-tags").catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var o=n(5969);function u(e,t,n,r,a,i){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(s().mark((function e(t,n,r,a,i,c){var l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l=new FormData).append("title",t),l.append("category",n),l.append("tags",r),l.append("description",a),l.append("items",JSON.stringify(i)),c.forEach((function(e){return l.append(e.title,e.file)})),e.t0=fetch,e.next=10,o.Z.auth().currentUser.getIdToken();case 10:return e.t1=e.sent,e.t2={Token:e.t1},e.t3=l,e.t4={method:"POST",headers:e.t2,body:e.t3},e.next=16,(0,e.t0)("/api/post-collection",e.t4).catch((function(e){return console.log(e)}));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.next=3,o.Z.auth().currentUser.getIdToken();case 3:e.t1=e.sent,e.t2={"Content-Type":"application/json",Token:e.t1},e.t3=JSON.stringify({tag:t}),e.t4={method:"POST",headers:e.t2,body:e.t3},(0,e.t0)("/api/post-tag",e.t4).catch((function(e){return console.log(e)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=n(3174),f=n(4483),x=n(2791),g=n(3360),v=n(6516),j=n(3168),y=n(184);function Z(e){var t=e.items,n=(0,j.$)().t,r=(0,x.useState)(0),i=(0,a.Z)(r,2),s=i[0],c=i[1],l=[],o=1;return t.forEach((function(e,r,a){l.push((0,y.jsxs)(x.Fragment,{children:[(0,y.jsxs)("div",{className:"h4 mt-3 d-flex",children:[(0,y.jsx)(g.Z,{className:"bg-transparent border-0 me-1",variant:"danger",onClick:function(e){return function(e){t.delete(e),c(s+1)}(r)},children:(0,y.jsx)(f.G,{icon:m.Kl4,color:"red"})}),(0,y.jsx)(v.Z.Control,{required:!0,size:"lg",type:"text",placeholder:n("uiItem",{i:o++}),name:"title"+r},"title"+r)]},"header"+r),t.get(r).size<1&&(0,y.jsx)("div",{className:"text-muted",children:n("uiAddFieldPrompt")})]},"fragment"+r)),t.get(r).forEach((function(e,n){var a;a="boolean"===e?(0,y.jsx)(v.Z.Check,{type:"checkbox",label:n,id:n+r},n+r):"color"===e?(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[(0,y.jsx)(v.Z.Label,{className:"me-3",variant:"secondary",children:n}),(0,y.jsx)(v.Z.Control,{type:"color",name:n+r},n+r)]}):"image"===e?(0,y.jsx)(v.Z.Control,{required:!0,type:"file",id:n+r,accept:"image/*"}):(0,y.jsx)(v.Z.Control,{required:!0,type:t.get(r).get(n),placeholder:n,name:n+r},n+r),l.push((0,y.jsxs)("div",{className:"d-flex my-3",children:[(0,y.jsx)(g.Z,{className:"bg-transparent border-0 me-1",variant:"danger",onClick:function(e){return function(e,n){t.get(e).delete(n),c(s+1)}(r,n)},children:(0,y.jsx)(f.G,{icon:m.Kl4,color:"red"})},"removeFieldButton"+r),a]},"flex"+n+r))})),l.push((0,y.jsxs)("div",{className:"d-flex my-3",children:[(0,y.jsx)(g.Z,{className:"bg-transparent border-0 me-1",variant:"success",onClick:function(e){return function(e){var n=document.getElementById("newFieldTitle"+e).value,r=document.getElementById("newFieldType"+e).value;document.getElementById("newFieldTitle"+e).value="",t.get(e).set(n,r),c(s+1)}(r)},children:(0,y.jsx)(f.G,{icon:m.r8p,color:"green"})},"addFieldButton"+r),(0,y.jsx)(v.Z.Control,{className:"me-3",type:"text",id:"newFieldTitle"+r,placeholder:n("uiNewFieldTitle")},"newFieldTitle"+r),(0,y.jsxs)(v.Z.Select,{className:"max-width-8",id:"newFieldType"+r,children:[(0,y.jsx)("option",{value:"text",children:n("uiText")}),(0,y.jsx)("option",{value:"number",children:n("uiNumber")}),(0,y.jsx)("option",{value:"image",children:n("uiImage")}),(0,y.jsx)("option",{value:"date",children:n("uiDate")}),(0,y.jsx)("option",{value:"color",children:n("uiColor")}),(0,y.jsx)("option",{value:"boolean",children:n("uiBoolean")})]},"newFieldType"+r)]},"flex"+r))})),(0,y.jsxs)(y.Fragment,{children:[l,(0,y.jsxs)(g.Z,{className:"float-end",variant:"success",onClick:function(e){t.set(s,new Map),c(s+1)},children:[(0,y.jsx)(f.G,{className:"me-1",icon:m.r8p}),n("uiAddItem")]})]})}var w=n(9466),b=n(7841),N=n(7022),k=n(6907),C=n(6871);function T(){var e=(0,j.$)().t,t=(0,C.s0)(),n=(0,x.useState)(new Map),i=(0,a.Z)(n,2),o=i[0],d=(i[1],(0,x.useState)([])),h=(0,a.Z)(d,2),m=h[0],f=h[1],T=(0,x.useState)([]),S=(0,a.Z)(T,2),F=S[0],E=S[1],I=(0,x.useState)([]),G=(0,a.Z)(I,2),B=G[0],q=G[1];(0,x.useEffect)((function(){(function(e){return c.apply(this,arguments)})().then((function(e){return f(e)})),function(){return l.apply(this,arguments)}().then((function(e){return E(e)}))}),[]);var O=function(){var e=(0,r.Z)(s().mark((function e(n){var r,a,i,c,l,d,h,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n.preventDefault(),r=n.target.elements,a=r.title,i=r.category,c=r.description,l=0;l<B.length;l++)null!==(d=B[l])&&void 0!==d&&d.customOption&&(p(B[l].label),B[l]=B[l].label);return h=[],m=[],o.forEach((function(e,t){var r=[];e.forEach((function(e,a){var i;"boolean"===e?i=n.target.elements[a+t].checked.toString():"image"===e?m.push({title:a,file:n.target.elements[a+t].files[0]}):i=n.target.elements[a+t].value,r.push({title:a,type:e,value:i})})),h.push({title:n.target.elements["title"+t].value,properties:r})})),e.next=8,u(a.value,i.value,B,c.value,h,m);case 8:t(w.Jm);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,y.jsxs)(N.Z,{className:"max-width-60 justify-content-center",children:[(0,y.jsx)(k.ql,{children:(0,y.jsx)("title",{children:e("pageNewCollection")})}),(0,y.jsxs)(v.Z,{onSubmit:O,id:"newcollectionform",children:[(0,y.jsx)(v.Z.Group,{className:"mb-3",children:(0,y.jsx)(v.Z.Control,{required:!0,type:"text",name:"title",placeholder:e("uiTitle")})}),(0,y.jsx)(v.Z.Group,{className:"mb-3",children:(0,y.jsx)(v.Z.Select,{name:"category",children:m.map((function(t){return(0,y.jsx)("option",{value:t,children:e(t)},t)}))})}),(0,y.jsx)(b.pY,{allowNew:!0,id:"tags",multiple:!0,newSelectionPrefix:e("uiNewSelectionPrefix"),options:F,placeholder:e("uiTags"),minLength:3,onChange:function(e){q(e)}}),(0,y.jsx)(v.Z.Group,{className:"my-3",children:(0,y.jsx)(v.Z.Control,{as:"textarea",rows:3,name:"description",placeholder:e("uiDescription")})}),(0,y.jsx)(Z,{items:o}),(0,y.jsx)(g.Z,{variant:"primary me-2",type:"submit",children:e("uiCreate")})]})]})}}}]);
//# sourceMappingURL=548.bd0f7739.chunk.js.map
{"version":3,"file":"static/js/548.bd0f7739.chunk.js","mappings":"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","sources":["api/get/getCategories.js","api/get/getTags.js","api/post/postCollection.js","api/post/postTag.js","components/form/CustomFields.jsx","pages/new-collection/NewCollection.jsx"],"sourcesContent":["export default async function getCategories(collectionId) {\n    const categories = await fetch('/api/get-categories')\n        .catch(error => console.log(error))\n    return await categories.json()\n}\n","export default async function getTags() {\n    const tags = await fetch('/api/get-tags')\n        .catch(error => console.log(error))\n    return await tags.json()\n}\n","import firebase from 'utils/firebase'\n\nexport default async function postCollection(title, category, tags, description, items, files) {\n    var data = new FormData()\n    data.append('title', title)\n    data.append('category', category)\n    data.append('tags', tags)\n    data.append('description', description)\n    data.append('items', JSON.stringify(items))\n    files.forEach(file => data.append(file.title, file.file))\n    await fetch('/api/post-collection', {\n        method: 'POST',\n        headers: {\n            'Token': await firebase.auth().currentUser.getIdToken()\n        },\n        body: data\n    })\n        .catch(error => console.log(error))\n}","import firebase from 'utils/firebase'\n\nexport default async function postTag(tag) {\n    fetch('/api/post-tag', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Token': await firebase.auth().currentUser.getIdToken()\n        },\n        body: JSON.stringify({ tag: tag }),\n    })\n        .catch(error => console.log(error))\n}","import { faMinus, faPlus } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { Fragment, useState } from 'react'\nimport Button from 'react-bootstrap/Button'\nimport Form from 'react-bootstrap/Form'\nimport { useTranslation } from 'react-i18next'\n\n// TODO: separate this into components\n\nexport default function CustomFields({ items }) {\n    const { t } = useTranslation()\n    const [counter, setCounter] = useState(0)\n    const addItem = event => {\n        items.set(counter, new Map())\n        setCounter(counter + 1)\n    }\n    const removeItem = id => {\n        items.delete(id)\n        setCounter(counter + 1)\n    }\n    const addProperty = id => {\n        const title = document.getElementById('newFieldTitle' + id).value\n        const type = document.getElementById('newFieldType' + id).value\n        document.getElementById('newFieldTitle' + id).value = ''\n        items.get(id).set(title, type)\n        setCounter(counter + 1)\n    }\n    const deleteProperty = (id, title) => {\n        items.get(id).delete(title)\n        setCounter(counter + 1)\n    }\n    var elements = []\n    var i = 1\n    items.forEach((properties, id, map) => {\n        elements.push(\n            <Fragment key={'fragment' + id}>\n                <div className='h4 mt-3 d-flex' key={'header' + id}>\n                    <Button className='bg-transparent border-0 me-1' variant='danger' onClick={event => removeItem(id)}>\n                        <FontAwesomeIcon icon={faMinus} color='red' />\n                    </Button>\n                    <Form.Control required key={'title' + id} size='lg' type='text' placeholder={t('uiItem', { i: i++ })} name={'title' + id} />\n                </div>\n                {\n                    items.get(id).size < 1 &&\n                    <div className='text-muted'>\n                        {t('uiAddFieldPrompt')}\n                    </div>\n                }\n            </Fragment>\n        )\n        items.get(id).forEach((type, title) => {\n            var element\n            if (type === 'boolean') {\n                element = <Form.Check key={title + id} type='checkbox' label={title} id={title + id} />\n            } else if (type === 'color') {\n                element =\n                    <div className='d-flex align-items-center'>\n                        <Form.Label className='me-3' variant='secondary'>{title}</Form.Label>\n                        <Form.Control key={title + id} type='color' name={title + id} />\n                    </div>\n            } else if (type === 'image') {\n                element = <Form.Control required type='file' id={title + id} accept='image/*' />\n            } else {\n                element = <Form.Control required key={title + id} type={items.get(id).get(title)} placeholder={title} name={title + id} />\n            }\n            elements.push(\n                <div className='d-flex my-3' key={'flex' + title + id}>\n                    <Button className='bg-transparent border-0 me-1' variant='danger' key={'removeFieldButton' + id} onClick={event => deleteProperty(id, title)}>\n                        <FontAwesomeIcon icon={faMinus} color='red' />\n                    </Button>\n                    {element}\n                </div>\n            )\n        })\n        elements.push(\n            <div className='d-flex my-3' key={'flex' + id}>\n                <Button className='bg-transparent border-0 me-1' variant='success' key={'addFieldButton' + id} onClick={event => addProperty(id)}>\n                    <FontAwesomeIcon icon={faPlus} color='green' />\n                </Button>\n                <Form.Control className='me-3' type='text' id={'newFieldTitle' + id} placeholder={t('uiNewFieldTitle')} key={'newFieldTitle' + id} />\n                <Form.Select className='max-width-8' id={'newFieldType' + id} key={'newFieldType' + id}>\n                    <option value='text'>{t('uiText')}</option>\n                    <option value='number'>{t('uiNumber')}</option>\n                    <option value='image'>{t('uiImage')}</option>\n                    <option value='date'>{t('uiDate')}</option>\n                    <option value='color'>{t('uiColor')}</option>\n                    <option value='boolean'>{t('uiBoolean')}</option>\n                </Form.Select>\n            </div>\n        )\n    })\n    return (\n        <>\n            {elements}\n            <Button className='float-end' variant='success' onClick={addItem}>\n                <FontAwesomeIcon className='me-1' icon={faPlus} />\n                {t('uiAddItem')}\n            </Button>\n        </>\n    )\n}\n\n/*\n<div className='d-flex my-3 align-items-center'>\n                <div className='text-muted'>\n                    {t('uiFields')}\n                </div>\n                <Button className='bg-transparent border-0 me-1' variant='success' onClick={event => console.log(event)}>\n                    <FontAwesomeIcon icon={faPlus} color='green' />\n                </Button>\n            </div>\n            <div className='d-flex my-3 align-items-center'>\n                <Form.Control className='me-3' type='text' id={'newFieldTitle'} placeholder={t('uiNewFieldTitle')} />\n                <Form.Select className='max-width-8' id={'newFieldType'}>\n                    <option value='text'>{t('uiText')}</option>\n                    <option value='number'>{t('uiNumber')}</option>\n                    <option value='image'>{t('uiImage')}</option>\n                    <option value='date'>{t('uiDate')}</option>\n                    <option value='color'>{t('uiColor')}</option>\n                    <option value='boolean'>{t('uiBoolean')}</option>\n                </Form.Select>\n            </div>\n            <div className='pt-3'>\n                {elements}\n            </div>\n*/","import getCategories from 'api/get/getCategories'\nimport fetchTags from 'api/get/getTags'\nimport postCollection from 'api/post/postCollection'\nimport postTag from 'api/post/postTag'\nimport CustomFields from 'components/form/CustomFields'\nimport { pathProfile } from 'paths'\nimport { useEffect, useState } from 'react'\nimport { Typeahead } from 'react-bootstrap-typeahead'\nimport Button from 'react-bootstrap/Button'\nimport Container from 'react-bootstrap/Container'\nimport Form from 'react-bootstrap/Form'\nimport { Helmet } from 'react-helmet-async'\nimport { useTranslation } from 'react-i18next'\nimport { useNavigate } from 'react-router-dom'\n\nexport default function NewCollection() {\n    const { t } = useTranslation()\n    const navigate = useNavigate()\n    const [items, setItems] = useState(new Map())\n    const [categories, setCategories] = useState([])\n    const [fetchedTags, setFetchedTags] = useState([])\n    const [tags, setTags] = useState([])\n    const handleChange = event => {\n        setTags(event)\n    }\n    useEffect(() => {\n        getCategories().then(result => setCategories(result))\n        fetchTags().then(result => setFetchedTags(result))\n    }, [])\n    const handleSubmit = async event => {\n        event.preventDefault()\n        const { title, category, description } = event.target.elements\n        for (var i = 0; i < tags.length; i++) {\n            if (tags[i]?.customOption) {\n                postTag(tags[i].label)\n                tags[i] = tags[i].label\n            }\n        }\n        var itemList = []\n        var files = []\n        items.forEach((properties, id) => {\n            var list = []\n            properties.forEach((type, title) => {\n                var value\n                if (type === 'boolean') {\n                    value = event.target.elements[title + id].checked.toString()\n                } else if (type === 'image') {\n                    files.push({ title: title, file: event.target.elements[title + id].files[0] })\n                } else {\n                    value = event.target.elements[title + id].value\n                }\n                list.push({\n                    title: title,\n                    type: type,\n                    value: value\n                })\n            })\n            itemList.push({\n                title: event.target.elements['title' + id].value,\n                properties: list\n            })\n        })\n        await postCollection(title.value, category.value, tags, description.value, itemList, files)\n        navigate(pathProfile)\n    }\n    return (\n        <Container className='max-width-60 justify-content-center'>\n            <Helmet>\n                <title>{t('pageNewCollection')}</title>\n            </Helmet>\n            <Form onSubmit={handleSubmit} id='newcollectionform'>\n                <Form.Group className='mb-3'>\n                    <Form.Control required type='text' name='title' placeholder={t('uiTitle')} />\n                </Form.Group>\n                <Form.Group className='mb-3'>\n                    <Form.Select name='category'>\n                        {\n                            categories.map(category => { return <option key={category} value={category}>{t(category)}</option> })\n                        }\n                    </Form.Select>\n                </Form.Group>\n                <Typeahead\n                    allowNew\n                    id='tags'\n                    multiple\n                    newSelectionPrefix={t('uiNewSelectionPrefix')}\n                    options={fetchedTags}\n                    placeholder={t('uiTags')}\n                    minLength={3}\n                    onChange={handleChange}\n                />\n                <Form.Group className='my-3'>\n                    <Form.Control as='textarea' rows={3} name='description' placeholder={t('uiDescription')} />\n                </Form.Group>\n                <CustomFields items={items} />\n                <Button variant='primary me-2' type='submit'>\n                    {t('uiCreate')}\n                </Button>\n            </Form>\n        </Container>\n    )\n}\n"],"names":["collectionId","fetch","catch","error","console","log","categories","json","tags","postCollection","title","category","description","items","files","data","FormData","append","JSON","stringify","forEach","file","firebase","currentUser","getIdToken","method","headers","body","postTag","tag","CustomFields","t","useTranslation","useState","counter","setCounter","elements","i","properties","id","map","push","Fragment","className","Button","variant","onClick","event","delete","removeItem","icon","faMinus","color","Form","required","size","type","placeholder","name","get","element","label","accept","deleteProperty","document","getElementById","value","set","addProperty","faPlus","Map","NewCollection","navigate","useNavigate","setCategories","fetchedTags","setFetchedTags","setTags","useEffect","getCategories","then","result","fetchTags","handleSubmit","preventDefault","target","length","customOption","itemList","list","checked","toString","pathProfile","Container","onSubmit","allowNew","multiple","newSelectionPrefix","options","minLength","onChange","as","rows"],"sourceRoot":""}
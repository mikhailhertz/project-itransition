"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[548],{3548:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var r=n(5861),a=n(9439),i=n(7757),s=n.n(i);function c(){return(c=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-categories").catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-tags").catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var o=n(5969);function u(e,t,n,r,a,i){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(s().mark((function e(t,n,r,a,i,c){var l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l=new FormData).append("title",t),l.append("category",n),l.append("tags",r),l.append("description",a),l.append("items",JSON.stringify(i)),c.forEach((function(e){return l.append(e.title,e.file)})),e.t0=fetch,e.next=10,o.Z.auth().currentUser.getIdToken();case 10:return e.t1=e.sent,e.t2={Token:e.t1},e.t3=l,e.t4={method:"POST",headers:e.t2,body:e.t3},e.next=16,(0,e.t0)("/api/post-collection",e.t4).catch((function(e){return console.log(e)}));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.next=3,o.Z.auth().currentUser.getIdToken();case 3:e.t1=e.sent,e.t2={"Content-Type":"application/json",Token:e.t1},e.t3=JSON.stringify({tag:t}),e.t4={method:"POST",headers:e.t2,body:e.t3},(0,e.t0)("/api/post-tag",e.t4).catch((function(e){return console.log(e)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=n(3174),h=n(4483),x=n(2791),g=n(3360),v=n(6516),j=n(3168),y=n(184);function Z(e){var t=e.items,n=(0,j.$)().t,r=(0,x.useState)(0),i=(0,a.Z)(r,2),s=i[0],c=i[1],l=[],o=1;return t.forEach((function(e,r,a){l.push((0,y.jsx)(x.Fragment,{children:(0,y.jsxs)("div",{className:"d-flex",children:[(0,y.jsx)(g.Z,{className:"bg-transparent border-0 me-1",size:"lg",variant:"danger",onClick:function(e){return function(e){t.delete(e),c(s+1)}(r)},children:(0,y.jsx)(h.G,{icon:f.Kl4,color:"red"})}),(0,y.jsx)(v.Z.Control,{required:!0,size:"lg",type:"text",placeholder:n("uiItem",{i:o++}),name:"title"+r},"title"+r)]},"header"+r)},"fragment"+r)),t.get(r).forEach((function(e,n){var a;a="boolean"===e?(0,y.jsx)(v.Z.Check,{type:"checkbox",label:n,id:n+r},n+r):"color"===e?(0,y.jsx)("div",{className:"d-flex align-items-center",children:(0,y.jsx)(v.Z.Control,{type:"color",name:n+r},n+r)}):"image"===e?(0,y.jsx)(v.Z.Control,{required:!0,type:"file",id:n+r,accept:"image/*"}):(0,y.jsx)(v.Z.Control,{required:!0,type:t.get(r).get(n),name:n+r},n+r),l.push((0,y.jsxs)("div",{className:"d-flex my-3 align-items-center",children:[(0,y.jsx)(g.Z,{className:"bg-transparent border-0 me-1",variant:"danger",onClick:function(e){return function(e,n){t.get(e).delete(n),c(s+1)}(r,n)},children:(0,y.jsx)(h.G,{icon:f.Kl4,color:"red"})},"removeFieldButton"+r),(0,y.jsx)(v.Z.Label,{className:"mb-0 me-3",children:n+":"}),a]},"flex"+n+r))})),l.push((0,y.jsxs)("div",{className:"d-flex my-3 align-items-center",children:[(0,y.jsx)(g.Z,{className:"bg-transparent border-0 me-1",variant:"success",onClick:function(e){return function(e){var n=document.getElementById("newFieldTitle"+e).value,r=document.getElementById("newFieldType"+e).value;document.getElementById("newFieldTitle"+e).value="",t.get(e).set(n,r),c(s+1)}(r)},children:(0,y.jsx)(h.G,{icon:f.r8p,color:"green"})},"addFieldButton"+r),(0,y.jsx)(v.Z.Label,{className:"mb-0 me-3 text-nowrap",children:n("uiAddFieldPrompt")}),(0,y.jsx)(v.Z.Control,{className:"me-3",type:"text",id:"newFieldTitle"+r,placeholder:n("uiNewFieldTitle")},"newFieldTitle"+r),(0,y.jsxs)(v.Z.Select,{id:"newFieldType"+r,children:[(0,y.jsx)("option",{value:"text",children:n("uiText")}),(0,y.jsx)("option",{value:"number",children:n("uiNumber")}),(0,y.jsx)("option",{value:"image",children:n("uiImage")}),(0,y.jsx)("option",{value:"date",children:n("uiDate")}),(0,y.jsx)("option",{value:"color",children:n("uiColor")}),(0,y.jsx)("option",{value:"boolean",children:n("uiBoolean")})]},"newFieldType"+r)]},"flex"+r))})),(0,y.jsxs)(y.Fragment,{children:[l,(0,y.jsxs)(g.Z,{className:"float-end",variant:"success",onClick:function(e){t.set(s,new Map),c(s+1)},children:[(0,y.jsx)(h.G,{className:"me-1",icon:f.r8p}),n("uiAddItem")]})]})}var w=n(9466),b=n(7841),N=n(7022),k=n(6907),C=n(6871);function T(){var e=(0,x.useState)(new Map),t=(0,a.Z)(e,2),n=t[0],i=(t[1],(0,x.useState)([])),o=(0,a.Z)(i,2),p=o[0],m=o[1],f=(0,x.useState)([]),h=(0,a.Z)(f,2),T=h[0],S=h[1],F=(0,x.useState)([]),E=(0,a.Z)(F,2),I=E[0],G=E[1],q=(0,C.s0)(),B=(0,j.$)().t;(0,x.useEffect)((function(){(function(e){return c.apply(this,arguments)})().then((function(e){return m(e)})),function(){return l.apply(this,arguments)}().then((function(e){return S(e)}))}),[]);var O=function(){var e=(0,r.Z)(s().mark((function e(t){var r,a,i,c,l,o,p,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),r=t.target.elements,a=r.title,i=r.category,c=r.description,l=0;l<I.length;l++)null!==(o=I[l])&&void 0!==o&&o.customOption&&(d(I[l].label),I[l]=I[l].label);return p=[],m=[],n.forEach((function(e,n){var r=[];e.forEach((function(e,a){var i;"boolean"===e?i=t.target.elements[a+n].checked.toString():"image"===e?m.push({title:a,file:t.target.elements[a+n].files[0]}):i=t.target.elements[a+n].value,r.push({title:a,type:e,value:i})})),p.push({title:t.target.elements["title"+n].value,properties:r})})),e.next=8,u(a.value,i.value,I,c.value,p,m);case 8:q(w.Jm);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,y.jsxs)(N.Z,{fluid:!0,children:[(0,y.jsx)(k.ql,{children:(0,y.jsx)("title",{children:B("pageNewCollection")})}),(0,y.jsxs)(v.Z,{onSubmit:O,className:"new-collection-form me-auto ms-auto",id:"newcollectionform",children:[(0,y.jsx)(v.Z.Group,{className:"mb-3",children:(0,y.jsx)(v.Z.Control,{required:!0,type:"text",name:"title",placeholder:B("uiTitle")})}),(0,y.jsx)(v.Z.Group,{className:"mb-3",children:(0,y.jsx)(v.Z.Select,{name:"category",children:p.map((function(e){return(0,y.jsx)("option",{value:e,children:B(e)},e)}))})}),(0,y.jsx)(b.pY,{allowNew:!0,id:"tags",multiple:!0,newSelectionPrefix:B("uiNewSelectionPrefix"),options:T,placeholder:B("uiTags"),minLength:3,onChange:function(e){G(e)}}),(0,y.jsx)(v.Z.Group,{className:"my-3",children:(0,y.jsx)(v.Z.Control,{required:!0,as:"textarea",rows:3,name:"description",placeholder:B("uiDescription")})}),(0,y.jsx)(Z,{items:n}),(0,y.jsx)(g.Z,{variant:"primary me-2",type:"submit",children:B("uiCreate")})]})]})}}}]);
//# sourceMappingURL=548.5a017901.chunk.js.map
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[441],{8441:function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var r=n(9439),a=n(5861),c=n(7757),i=n.n(c);function o(){return(o=(0,a.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-collection?id="+t).catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return u.apply(this,arguments)}function u(){return(u=(0,a.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-comments?id="+t).catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=n(5969);function d(){return(d=(0,a.Z)(i().mark((function e(t,n,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.next=3,l.Z.auth().currentUser.getIdToken();case 3:e.t1=e.sent,e.t2={"Content-Type":"application/json",Token:e.t1},e.t3=JSON.stringify({uid:t,id:n,text:r}),e.t4={method:"POST",headers:e.t2,body:e.t3},(0,e.t0)("/api/post-comment",e.t4).catch((function(e){return console.log(e)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=n(9699),f=n(7082),p=n(2791),h=n(6516),v=n(3360),x=n(3168),b=n(6871),g=n(184);function k(){var e=(0,p.useState)([]),t=(0,r.Z)(e,2),n=t[0],a=t[1],c=(0,p.useContext)(m.z).token,i=(0,p.useContext)(f.J).socket,o=(0,b.UO)().collectionId,u=(0,x.$)().t;return(0,p.useEffect)((function(){var e=!0;return s(o).then((function(e){return a(e)})),i.on("new comment",(function(t){s(o).then((function(t){return e&&a(t)}))})),function(){e=!1}}),[o,i,c]),(0,g.jsxs)("div",{className:"comment-section me-auto ms-auto",children:[(0,g.jsx)("h5",{className:"mb-3",children:u("uiComments")}),n.map((function(e,t){return(0,g.jsx)(p.Fragment,{children:(0,g.jsxs)("div",{className:"d-flex align-items-center",children:[(0,g.jsx)("h6",{className:"mb-0 me-2",children:e.user.name+":"}),(0,g.jsx)("div",{children:e.comment})]},"CommentSectionFlex")},"CommentSectionFragment"+t)})),c&&(0,g.jsxs)(h.Z,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),function(e,t,n){d.apply(this,arguments)}(c.uid,o,e.target.elements.comment.value),e.target.elements.comment.value=""},children:[(0,g.jsx)(h.Z.Control,{required:!0,autoComplete:"off",className:"my-3",name:"comment",placeholder:u("uiComment")}),(0,g.jsx)(v.Z,{variant:"primary",type:"submit",children:u("uiSend")})]})]})}var j=n(3174),y=n(4483);function Z(e){return N.apply(this,arguments)}function N(){return(N=(0,a.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-likes?id="+t).catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-like-status?uid="+t+"&id="+n).catch((function(e){return console.log(e)}));case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=(0,a.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.next=3,l.Z.auth().currentUser.getIdToken();case 3:e.t1=e.sent,e.t2={"Content-Type":"application/json",Token:e.t1},e.t3=JSON.stringify({id:t}),e.t4={method:"POST",headers:e.t2,body:e.t3},(0,e.t0)("/api/toggle-like",e.t4).catch((function(e){return console.log(e)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){var t=e.collectionId,n=(0,p.useState)({likes:0,liked:!1}),c=(0,r.Z)(n,2),o=c[0],s=c[1],u=(0,p.useContext)(m.z).token,l=(0,p.useContext)(f.J).socket,d=(0,x.$)().t;return(0,p.useEffect)((function(){var e=!0;return Z(t).then(function(){var e=(0,a.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=s,e.t1=n.value,!u){e.next=8;break}return e.next=5,C(u.uid,t);case 5:e.t2=e.sent,e.next=9;break;case 8:e.t2=!1;case 9:e.t3=e.t2,e.t4={likes:e.t1,liked:e.t3},(0,e.t0)(e.t4);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l.on("toggle like",(function(){Z(t).then(function(){var n=(0,a.Z)(i().mark((function n(r){var a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!u){n.next=6;break}return n.next=3,C(u.uid,t);case 3:n.t0=n.sent,n.next=7;break;case 6:n.t0=!1;case 7:a=n.t0,e&&s({likes:r.value,liked:a});case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})),function(){e=!1}}),[t,u,l]),(0,g.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[u&&(0,g.jsx)(v.Z,{className:"bg-transparent border-0 me-1",variant:o.liked?"danger":"secondary",onClick:function(e){e.preventDefault(),e.stopPropagation(),function(e){I.apply(this,arguments)}(t)},children:(0,g.jsx)(y.G,{icon:j.m6i,color:o.liked?"red":"gray"})}),(0,g.jsx)("div",{children:o.likes+d("uiLikes",{count:o.likes})})]})}var S=n(9466),T=n(7022),F=n(1413),O=n(5987),z=n(1694),E=n.n(z),D=n(2007),J=n.n(D),L=n(162),U=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],G=(J().string,J().bool,J().bool,J().bool,J().bool,p.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.fluid,c=e.rounded,i=e.roundedCircle,o=e.thumbnail,s=(0,O.Z)(e,U);return n=(0,L.vE)(n,"img"),(0,g.jsx)("img",(0,F.Z)((0,F.Z)({ref:t},s),{},{className:E()(r,a&&"".concat(n,"-fluid"),c&&"rounded",i&&"rounded-circle",o&&"".concat(n,"-thumbnail"))}))})));G.displayName="Image",G.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1};var K=G,R=(n(2391),n(239)),$=n(1382),V=n(9007),q=n(4787),A=n(8633),B=["bsPrefix","active","disabled","eventKey","className","variant","action","as"],H=p.forwardRef((function(e,t){var n=e.bsPrefix,a=e.active,c=e.disabled,i=e.eventKey,o=e.className,s=e.variant,u=e.action,l=e.as,d=(0,O.Z)(e,B);n=(0,L.vE)(n,"list-group-item");var m=(0,q.v)((0,F.Z)({key:(0,A.h)(i,d.href),active:a},d)),f=(0,r.Z)(m,2),p=f[0],h=f[1],v=(0,V.Z)((function(e){if(c)return e.preventDefault(),void e.stopPropagation();p.onClick(e)}));c&&void 0===d.tabIndex&&(d.tabIndex=-1,d["aria-disabled"]=!0);var x=l||(u?d.href?"a":"button":"div");return(0,g.jsx)(x,(0,F.Z)((0,F.Z)((0,F.Z)({ref:t},d),p),{},{onClick:v,className:E()(o,n,h.isActive&&"active",c&&"disabled",s&&"".concat(n,"-").concat(s),u&&"".concat(n,"-action"))}))}));H.displayName="ListGroupItem";var M=H,Q=["className","bsPrefix","variant","horizontal","numbered","as"],W=p.forwardRef((function(e,t){var n,r=(0,R.Ch)(e,{activeKey:"onSelect"}),a=r.className,c=r.bsPrefix,i=r.variant,o=r.horizontal,s=r.numbered,u=r.as,l=void 0===u?"div":u,d=(0,O.Z)(r,Q),m=(0,L.vE)(c,"list-group");return o&&(n=!0===o?"horizontal":"horizontal-".concat(o)),(0,g.jsx)($.Z,(0,F.Z)((0,F.Z)({ref:t},d),{},{as:l,className:E()(a,m,i&&"".concat(m,"-").concat(i),n&&"".concat(m,"-").concat(n),s&&"".concat(m,"-numbered"))}))}));W.displayName="ListGroup";var X=Object.assign(W,{Item:M}),Y=n(1316),_=n(885);function ee(){var e=(0,p.useState)({loading:!0,collection:null}),t=(0,r.Z)(e,2),n=t[0],a=t[1],c=(0,p.useContext)(f.J).socket,i=(0,b.UO)().collectionId,s=(0,b.s0)(),u=(0,x.$)().t,l=function(e){s(S.LV,{state:e.target.value})};return(0,p.useEffect)((function(){return function(e){return o.apply(this,arguments)}(i).then((function(e){return a({loading:!1,collection:e})})),c.emit("collection",i),function(){c.emit("left collection",i)}}),[i,c]),n.loading?(0,g.jsx)(g.Fragment,{}):(0,g.jsxs)(T.Z,{fluid:!0,children:[(0,g.jsx)("h1",{className:"mb-3",children:n.collection.title}),(0,g.jsx)("h3",{className:"pb-0",children:u("uiDescription")}),(0,g.jsx)("div",{className:"border rounded p-3 mb-3",children:(0,g.jsx)(Y.D,{components:{p:"div"},children:n.collection.description,remarkPlugins:[_.Z]})}),(0,g.jsx)("div",{className:"h3",children:u("uiTags")}),(0,g.jsx)("div",{className:"border rounded p-3 mb-3",children:n.collection.tags.map((function(e){return(0,g.jsx)(v.Z,{value:e,onClick:l,className:"me-2",children:e},e)}))}),n.collection.items.map((function(e,t){return(0,g.jsxs)(p.Fragment,{children:[(0,g.jsx)("h5",{className:"mt-4 mb-0",children:e.title},"CollectionItemTitle"+t),(0,g.jsx)(X,{children:e.properties.map((function(e,n){var r;return r="image"===e.type?(0,g.jsx)(K,{className:"item-image",src:e.value},e.name+t+n):"color"===e.type?(0,g.jsx)(h.Z.Control,{type:"color",disabled:!0,defaultValue:e.value},e.name+t+n):(0,g.jsx)("div",{children:e.value},e.name+t+n),(0,g.jsx)(X.Item,{children:(0,g.jsxs)("div",{className:"d-flex align-items-center",children:[(0,g.jsx)("h6",{className:"mb-0 me-5",children:e.title},"CollectionItemTitle"+t+n),r]},"CollectionFlex"+t+n)},"CollectionItem"+t+n)}))})]},"CollectionFragment"+t)})),(0,g.jsx)(P,{collectionId:i}),(0,g.jsx)(k,{collectionId:i})]})}}}]);
//# sourceMappingURL=441.36b133e1.chunk.js.map
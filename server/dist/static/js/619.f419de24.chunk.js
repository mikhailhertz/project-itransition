"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[619],{7619:function(e,t,n){n.r(t),n.d(t,{default:function(){return ie}});var r=n(5861),c=n(9439),a=n(7757),i=n.n(a);function o(e){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-collection?id="+t).catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u=n(5969);function l(e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.next=3,u.Z.auth().currentUser.getIdToken();case 3:return e.t1=e.sent,e.t2={"Content-Type":"application/json",Token:e.t1},e.t3=JSON.stringify({id:t}),e.t4={method:"POST",headers:e.t2,body:e.t3},e.next=9,(0,e.t0)("/api/delete-collection",e.t4).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.next=3,u.Z.auth().currentUser.getIdToken();case 3:return e.t1=e.sent,e.t2={"Content-Type":"application/json",Token:e.t1},e.t3=JSON.stringify({id:t}),e.t4={method:"POST",headers:e.t2,body:e.t3},e.next=9,(0,e.t0)("/api/delete-item",e.t4).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-comments?id="+t).catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=(0,r.Z)(i().mark((function e(t,n,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.next=3,u.Z.auth().currentUser.getIdToken();case 3:e.t1=e.sent,e.t2={"Content-Type":"application/json",Token:e.t1},e.t3=JSON.stringify({uid:t,id:n,text:r}),e.t4={method:"POST",headers:e.t2,body:e.t3},(0,e.t0)("/api/post-comment",e.t4).catch((function(e){return console.log(e)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=n(9699),g=n(7082),b=n(2791),k=n(6516),j=n(3360),y=n(3168),Z=n(6871),N=n(184);function C(){var e=(0,b.useState)([]),t=(0,c.Z)(e,2),n=t[0],r=t[1],a=(0,b.useContext)(v.z).token,i=(0,b.useContext)(g.J).socket,o=(0,Z.UO)().collectionId,s=(0,y.$)().t;return(0,b.useEffect)((function(){var e=!0;return p(o).then((function(e){return r(e)})),i.on("new comment",(function(t){p(o).then((function(t){return e&&r(t)}))})),function(){e=!1}}),[o,i,a]),(0,N.jsxs)("div",{className:"comment-section me-auto ms-auto",children:[(0,N.jsx)("h5",{className:"mb-3",children:s("uiComments")}),n.map((function(e,t){return(0,N.jsx)(b.Fragment,{children:(0,N.jsxs)("div",{className:"d-flex align-items-center",children:[(0,N.jsx)("h6",{className:"mb-0 me-2",children:e.user.name+":"}),(0,N.jsx)("div",{children:e.comment})]},"CommentSectionFlex")},"CommentSectionFragment"+t)})),a&&(0,N.jsxs)(k.Z,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),function(e,t,n){x.apply(this,arguments)}(a.uid,o,e.target.elements.comment.value),e.target.elements.comment.value=""},children:[(0,N.jsx)(k.Z.Control,{required:!0,autoComplete:"off",className:"my-3",name:"comment",placeholder:s("uiComment")}),(0,N.jsx)(j.Z,{variant:"primary",type:"submit",children:s("uiSend")})]})]})}var w=n(3174),T=n(4483);function I(e){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-likes?id="+t).catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return O.apply(this,arguments)}function O(){return(O=(0,r.Z)(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-like-status?uid="+t+"&id="+n).catch((function(e){return console.log(e)}));case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.next=3,u.Z.auth().currentUser.getIdToken();case 3:e.t1=e.sent,e.t2={"Content-Type":"application/json",Token:e.t1},e.t3=JSON.stringify({id:t}),e.t4={method:"POST",headers:e.t2,body:e.t3},(0,e.t0)("/api/toggle-like",e.t4).catch((function(e){return console.log(e)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){var t=e.collectionId,n=(0,b.useState)({likes:0,liked:!1}),a=(0,c.Z)(n,2),o=a[0],s=a[1],u=(0,b.useContext)(v.z).token,l=(0,b.useContext)(g.J).socket,d=(0,y.$)().t;return(0,b.useEffect)((function(){var e=!0;return I(t).then(function(){var e=(0,r.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=s,e.t1=n.value,!u){e.next=8;break}return e.next=5,P(u.uid,t);case 5:e.t2=e.sent,e.next=9;break;case 8:e.t2=!1;case 9:e.t3=e.t2,e.t4={likes:e.t1,liked:e.t3},(0,e.t0)(e.t4);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l.on("toggle like",(function(){I(t).then(function(){var n=(0,r.Z)(i().mark((function n(r){var c;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!u){n.next=6;break}return n.next=3,P(u.uid,t);case 3:n.t0=n.sent,n.next=7;break;case 6:n.t0=!1;case 7:c=n.t0,e&&s({likes:r.value,liked:c});case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})),function(){e=!1}}),[t,u,l]),(0,N.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[u&&(0,N.jsx)(j.Z,{className:"bg-transparent border-0 me-1",variant:o.liked?"danger":"secondary",onClick:function(e){e.preventDefault(),e.stopPropagation(),function(e){z.apply(this,arguments)}(t)},children:(0,N.jsx)(T.G,{icon:w.m6i,color:o.liked?"red":"gray"})}),(0,N.jsx)("div",{children:o.likes+d("uiLikes",{count:o.likes})})]})}var J=n(9466),E=n(7022),U=n(1413),D=n(5987),G=n(1694),$=n.n(G),L=n(2007),K=n.n(L),R=n(162),q=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],V=(K().string,K().bool,K().bool,K().bool,K().bool,b.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,c=e.fluid,a=e.rounded,i=e.roundedCircle,o=e.thumbnail,s=(0,D.Z)(e,q);return n=(0,R.vE)(n,"img"),(0,N.jsx)("img",(0,U.Z)((0,U.Z)({ref:t},s),{},{className:$()(r,c&&"".concat(n,"-fluid"),a&&"rounded",i&&"rounded-circle",o&&"".concat(n,"-thumbnail"))}))})));V.displayName="Image",V.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1};var W=V,_=(n(2391),n(239)),A=n(1382),B=n(9007),H=n(4787),M=n(8633),Q=["bsPrefix","active","disabled","eventKey","className","variant","action","as"],X=b.forwardRef((function(e,t){var n=e.bsPrefix,r=e.active,a=e.disabled,i=e.eventKey,o=e.className,s=e.variant,u=e.action,l=e.as,d=(0,D.Z)(e,Q);n=(0,R.vE)(n,"list-group-item");var f=(0,H.v)((0,U.Z)({key:(0,M.h)(i,d.href),active:r},d)),m=(0,c.Z)(f,2),p=m[0],h=m[1],x=(0,B.Z)((function(e){if(a)return e.preventDefault(),void e.stopPropagation();p.onClick(e)}));a&&void 0===d.tabIndex&&(d.tabIndex=-1,d["aria-disabled"]=!0);var v=l||(u?d.href?"a":"button":"div");return(0,N.jsx)(v,(0,U.Z)((0,U.Z)((0,U.Z)({ref:t},d),p),{},{onClick:x,className:$()(o,n,h.isActive&&"active",a&&"disabled",s&&"".concat(n,"-").concat(s),u&&"".concat(n,"-action"))}))}));X.displayName="ListGroupItem";var Y=X,ee=["className","bsPrefix","variant","horizontal","numbered","as"],te=b.forwardRef((function(e,t){var n,r=(0,_.Ch)(e,{activeKey:"onSelect"}),c=r.className,a=r.bsPrefix,i=r.variant,o=r.horizontal,s=r.numbered,u=r.as,l=void 0===u?"div":u,d=(0,D.Z)(r,ee),f=(0,R.vE)(a,"list-group");return o&&(n=!0===o?"horizontal":"horizontal-".concat(o)),(0,N.jsx)(A.Z,(0,U.Z)((0,U.Z)({ref:t},d),{},{as:l,className:$()(c,f,i&&"".concat(f,"-").concat(i),n&&"".concat(f,"-").concat(n),s&&"".concat(f,"-numbered"))}))}));te.displayName="ListGroup";var ne=Object.assign(te,{Item:Y}),re=n(1316),ce=n(885),ae=n(6907);function ie(){var e=(0,b.useState)({loading:!0,collection:null}),t=(0,c.Z)(e,2),n=t[0],a=t[1],s=(0,b.useContext)(v.z),u=s.token,d=s.admin,m=(0,b.useContext)(g.J).socket,p=(0,Z.UO)().collectionId,h=(0,Z.s0)(),x=(0,y.$)().t,I=function(e){h(J.LV,{state:e.target.value})},S=function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(p);case 2:h(-1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:o(p).then((function(e){return a({loading:!1,collection:e})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.useEffect)((function(){return o(p).then((function(e){return a({loading:!1,collection:e})})),m.emit("collection",p),function(){m.emit("left collection",p)}}),[p,m]),n.loading?(0,N.jsx)(N.Fragment,{}):(0,N.jsxs)(E.Z,{fluid:!0,children:[(0,N.jsx)(ae.ql,{children:(0,N.jsx)("title",{children:x("pageCollection")})}),(0,N.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,N.jsx)("h1",{className:"mb-0 me-3",children:n.collection.title}),u&&(n.collection.user===u.uid||d)&&(0,N.jsx)(j.Z,{onClick:S,className:"bg-transparent border-0",children:(0,N.jsx)(T.G,{icon:w.$aW,color:"red"})})]}),(0,N.jsx)("h3",{className:"pb-0",children:x("uiDescription")}),(0,N.jsx)("div",{className:"border rounded p-3 mb-3",children:(0,N.jsx)(re.D,{components:{p:"div"},children:n.collection.description,remarkPlugins:[ce.Z]})}),(0,N.jsx)("div",{className:"h3",children:x("uiTags")}),(0,N.jsx)("div",{className:"border rounded p-3 mb-3",children:n.collection.tags.map((function(e){return(0,N.jsx)(j.Z,{value:e,onClick:I,className:"me-2",children:e},e)}))}),n.collection.items.map((function(e,t){return(0,N.jsxs)(b.Fragment,{children:[(0,N.jsxs)("div",{className:"d-flex align-items-center mt-4",children:[(0,N.jsx)("h5",{className:"mb-0 me-3",children:e.title},"CollectionItemTitle"+t),u&&(n.collection.user===u.uid||d)&&(0,N.jsx)(j.Z,{onClick:function(t){return P(e._id)},className:"bg-transparent border-0",value:e._id,children:(0,N.jsx)(T.G,{icon:w.$aW,color:"red"})})]}),(0,N.jsx)(ne,{children:e.properties.map((function(e,n){var r;return r="image"===e.type?(0,N.jsx)(W,{className:"item-image",src:e.value},e.name+t+n):"color"===e.type?(0,N.jsx)(k.Z.Control,{type:"color",disabled:!0,defaultValue:e.value},e.name+t+n):(0,N.jsx)("div",{children:e.value},e.name+t+n),(0,N.jsx)(ne.Item,{children:(0,N.jsxs)("div",{className:"d-flex align-items-center",children:[(0,N.jsx)("h6",{className:"mb-0 me-5",children:e.title},"CollectionItemTitle"+t+n),r]},"CollectionFlex"+t+n)},"CollectionItem"+t+n)}))})]},"CollectionFragment"+t)})),(0,N.jsx)(F,{collectionId:p}),(0,N.jsx)(C,{collectionId:p})]})}}}]);
//# sourceMappingURL=619.f419de24.chunk.js.map
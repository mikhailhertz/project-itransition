"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[283],{1005:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(5861),a=t(7757),i=t.n(a);function c(e){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-collections-by-tag?tag="+n).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},9283:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var r=t(5861),a=t(9439),i=t(7757),c=t.n(i);function s(){return(s=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-collection?id="+n).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var o=t(2791),u=t(7022),l=t(3360),d=t(1413),f=t(5987),m=t(1694),p=t.n(m),h=t(2007),v=t.n(h),x=t(162),Z=t(184),b=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],g=(v().string,v().bool,v().bool,v().bool,v().bool,o.forwardRef((function(e,n){var t=e.bsPrefix,r=e.className,a=e.fluid,i=e.rounded,c=e.roundedCircle,s=e.thumbnail,o=(0,f.Z)(e,b);return t=(0,x.vE)(t,"img"),(0,Z.jsx)("img",(0,d.Z)((0,d.Z)({ref:n},o),{},{className:p()(r,a&&"".concat(t,"-fluid"),i&&"rounded",c&&"rounded-circle",s&&"".concat(t,"-thumbnail"))}))})));g.displayName="Image",g.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1};var j=g,y=t(1398),k=t(3168),N=t(6871),w=t(1316),C=t(885),I=t(5969);function P(){return(P=(0,r.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.next=3,I.Z.auth().currentUser.getIdToken();case 3:e.t1=e.sent,e.t2={"Content-Type":"application/json",Token:e.t1},e.t3=JSON.stringify({id:n}),e.t4={method:"POST",headers:e.t2,body:e.t3},(0,e.t0)("/api/toggle-like",e.t4).catch((function(e){return console.log(e)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=t(9699);function T(e,n){return O.apply(this,arguments)}function O(){return(O=(0,r.Z)(c().mark((function e(n,t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-like-status?uid="+n+"&id="+t).catch((function(e){return console.log(e)}));case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=t(6516);function D(){return(D=(0,r.Z)(c().mark((function e(n,t,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.next=3,I.Z.auth().currentUser.getIdToken();case 3:e.t1=e.sent,e.t2={"Content-Type":"application/json",Token:e.t1},e.t3=JSON.stringify({uid:n,id:t,text:r}),e.t4={method:"POST",headers:e.t2,body:e.t3},(0,e.t0)("/api/post-comment",e.t4).catch((function(e){return console.log(e)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=t(7082),G=t(3174),J=t(4483);function K(e){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-comments?id="+n).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return L.apply(this,arguments)}function L(){return(L=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get-likes?id="+n).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=t(1005);function F(){var e,n,t=(0,k.$)().t,i=(0,N.UO)().collectionId,d=(0,o.useState)(null),f=(0,a.Z)(d,2),m=f[0],p=f[1],h=(0,o.useState)([]),v=(0,a.Z)(h,2),x=v[0],b=v[1],g=(0,o.useState)(!1),I=(0,a.Z)(g,2),O=I[0],R=I[1],L=(0,o.useState)(0),F=(0,a.Z)(L,2),V=F[0],$=F[1],q=(0,o.useContext)(S.z).token,B=(0,o.useContext)(E.J).socket,H=(0,N.s0)(),M=function(){var e=(0,r.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.Z)(n);case 2:t=e.sent,H("/search",{state:t});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){return function(e){return s.apply(this,arguments)}(i).then((function(e){return p(e)})),K(i).then((function(e){return b(e)})),U(i).then((function(e){return $(e.value)})),q&&T(q.uid,i).then((function(e){return R(e)})),B.emit("joined comment section",i),B.on("new comment",(function(e){K(i).then((function(e){return b(e)}))})),B.on("toggle like",(function(e){U(i).then((function(e){return $(e.value)})),T(q.uid,i).then((function(e){return R(e)}))})),function(){B.emit("left comment section",i)}}),[i,B,q]);var Q=0;return(0,Z.jsxs)(u.Z,{fluid:!0,children:[(0,Z.jsx)("div",{className:"h1",children:null===m||void 0===m?void 0:m.title}),(0,Z.jsx)("div",{className:"h3",children:t("uiDescription")}),(0,Z.jsx)(y.Z,{className:"mb-3",children:(0,Z.jsx)(y.Z.Item,{children:(0,Z.jsx)(w.D,{children:null===m||void 0===m?void 0:m.description,remarkPlugins:[C.Z]})})}),(0,Z.jsx)("div",{className:"h3",children:t("uiTags")}),(0,Z.jsx)(y.Z,{className:"mb-3",children:(0,Z.jsx)(y.Z.Item,{children:null===m||void 0===m||null===(e=m.tags)||void 0===e?void 0:e.map((function(e){return""!==e&&(0,Z.jsx)(l.Z,{onClick:function(n){return M(e)},className:"me-2",children:e})}))})}),null===m||void 0===m||null===(n=m.items)||void 0===n?void 0:n.map((function(e){return(0,Z.jsxs)(o.Fragment,{children:[(0,Z.jsx)("div",{className:"h5 mt-4",children:e.title}),(0,Z.jsx)(y.Z,{children:e.properties.map((function(e){var n;return n="image"===e.type?(0,Z.jsx)(j,{className:"item-image",src:e.value}):"color"===e.type?(0,Z.jsx)(z.Z.Control,{type:"color",disabled:!0,defaultValue:e.value}):(0,Z.jsx)("div",{children:e.value}),(0,Z.jsx)(y.Z.Item,{children:(0,Z.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Z.jsx)("div",{className:"h6 me-5",children:e.title}),n]},"flex"+Q++)},"field"+Q++)}))})]},"fragment"+Q)})),(0,Z.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,Z.jsx)(l.Z,{className:"bg-transparent border-0 me-1",variant:O?"danger":"secondary",onClick:function(){!function(e){P.apply(this,arguments)}(i)},children:(0,Z.jsx)(J.G,{icon:G.m6i,color:O?"red":"gray"})}),(0,Z.jsx)("div",{children:V+" likes"})]}),null===x||void 0===x?void 0:x.map((function(e,n){return(0,Z.jsx)("div",{children:e.user.name+": "+e.comment},"div"+n)})),(0,Z.jsxs)(z.Z,{onSubmit:function(e){e.preventDefault(),function(e,n,t){D.apply(this,arguments)}(q.uid,i,e.target.elements.comment.value),e.target.elements.comment.value=""},children:[(0,Z.jsx)(z.Z.Control,{className:"my-3",as:"textarea",rows:3,name:"comment",placeholder:"Comment"}),(0,Z.jsx)(l.Z,{variant:"primary",type:"submit",children:"Submit"})]})]})}},1398:function(e,n,t){t.d(n,{Z:function(){return j}});var r=t(1413),a=t(5987),i=t(1694),c=t.n(i),s=t(2791),o=(t(2391),t(239)),u=t(1382),l=t(162),d=t(9439),f=t(9007),m=t(4787),p=t(8633),h=t(184),v=["bsPrefix","active","disabled","eventKey","className","variant","action","as"],x=s.forwardRef((function(e,n){var t=e.bsPrefix,i=e.active,s=e.disabled,o=e.eventKey,u=e.className,x=e.variant,Z=e.action,b=e.as,g=(0,a.Z)(e,v);t=(0,l.vE)(t,"list-group-item");var j=(0,m.v)((0,r.Z)({key:(0,p.h)(o,g.href),active:i},g)),y=(0,d.Z)(j,2),k=y[0],N=y[1],w=(0,f.Z)((function(e){if(s)return e.preventDefault(),void e.stopPropagation();k.onClick(e)}));s&&void 0===g.tabIndex&&(g.tabIndex=-1,g["aria-disabled"]=!0);var C=b||(Z?g.href?"a":"button":"div");return(0,h.jsx)(C,(0,r.Z)((0,r.Z)((0,r.Z)({ref:n},g),k),{},{onClick:w,className:c()(u,t,N.isActive&&"active",s&&"disabled",x&&"".concat(t,"-").concat(x),Z&&"".concat(t,"-action"))}))}));x.displayName="ListGroupItem";var Z=x,b=["className","bsPrefix","variant","horizontal","numbered","as"],g=s.forwardRef((function(e,n){var t,i=(0,o.Ch)(e,{activeKey:"onSelect"}),s=i.className,d=i.bsPrefix,f=i.variant,m=i.horizontal,p=i.numbered,v=i.as,x=void 0===v?"div":v,Z=(0,a.Z)(i,b),g=(0,l.vE)(d,"list-group");return m&&(t=!0===m?"horizontal":"horizontal-".concat(m)),(0,h.jsx)(u.Z,(0,r.Z)((0,r.Z)({ref:n},Z),{},{as:x,className:c()(s,g,f&&"".concat(g,"-").concat(f),t&&"".concat(g,"-").concat(t),p&&"".concat(g,"-numbered"))}))}));g.displayName="ListGroup";var j=Object.assign(g,{Item:Z})}}]);
//# sourceMappingURL=283.91d87065.chunk.js.map